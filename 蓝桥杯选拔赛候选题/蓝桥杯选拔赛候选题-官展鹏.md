# 蓝桥杯选拔赛候选题

## 下落的小球

<img src=images\image-20221129020534888.png width=40% />

如上图，倒置漏斗内有排列整齐的 $n$ 层轴，第 $i$ 层总共有 $i$ 根轴，且每层的轴都均匀分布。现在有一个小球从第 $1$ 层轴的正上方掉落，初始时小球分别有 $50\%$ 与 $50\%$ 的概率往左右两边掉落，在后续掉落过程中，每次有 $p\%$ 的概率沿原方向掉落，$1-p\%$ 的概率沿反方向掉落，问到达最后一层时，从每个位置掉落的概率分别是多少？

### 输入

输入两个整数 $n,~p$，分别表示轴的层数与沿原方向掉落的概率。

对于 $20\%$ 的数据，$1\leq n\leq 4$；

对于 $100\%$ 的数据，$1\leq n\leq 1000,~0\leq p\leq 100$。

### 输出

输出 $n+1$ 个整数，每个整数对应一个下落位置的概率，若某一个位置的概率为 $x$，则输出 $x\times100^{n}\mod (10^9+7)$ 的结果。

### 样例输入

> 2 60

### 样例输出

> 3000 4000 3000

### 解释

小球从正上方往下掉落时，分别有 $50\%~50\%$ 的概率往左右两边掉落，到第二层左边那个轴时，有 $60\%$ 的概率沿着原来的方向（左边）掉落，因此往最左边掉落的概率为 $50\%\times60\%=30\%$，有 $40\%$ 的概率往右边掉落，因此往中间掉落的概率有 $50\%\times40\%=20\%$，加上从右边往左边掉的 $20\%$ 的概率，总共有 $40\%$ 的概率会掉到中间，最右边同理。

$30\%~40\%~30\%$ 分别乘上 $100^n=100^2$，再对 $10^9+7$ 取余即 $3000~4000~3000$。

<img src=images\image-20221129023529859.png width=40% />

## 最大与路径

有一个 $n\times m$ 的矩阵，从左上角 $(1,1)$ 开始移动，到右下角 $(n,m)$ 结束，每次只能往右或者往下移动，设目标值为路径经过的所有数字的按位与运算，求所有路径中最大的目标值。

### 输入

第一行两个整数 $n,~m$，分别表示矩阵的行数与列数。接下去 $n$ 行每行 $m$ 个整数 $a_{ij}$，表示矩阵中的数字。

对于 $20\%$ 的数据，$1\leq n,m\leq 20$；

对于 $40\%$ 的数据，$0\leq a_{ij}\leq 1$；

对于 $100\%$ 的数据，$1\leq n\times m\leq10^6,0\leq a_{ij}\leq2^{31}-1$。

### 输出

输出最大的目标值。

### 样例输入

> 2 2
>
> 7 5
>
> 6 7

### 样例输出

> 6

## 走棋

一个 $n\times m$ 的棋盘，棋盘的每个格子都有一个数字 $a_{ij}$，有一个棋子在左上角 $(1,1)$，要移动到右下角 $(n,m)$，只能往右或者往下移动，两个人 A 和 B 轮流操作这枚棋子，总分数 $score$ 初始值为 $a_{1,1}$ 的值，A 每移动一次棋子，总分数就会加上棋子所在格子的数字，B 每移动一次棋子，总分数就会减去棋子所在格子上的数字，A 先开始移动，两个人都使用最优策略的情况下，最后的总分 $score$ 会是多少。

### 输入

第一行两个整数 $n,m$，分别表示棋盘的行数与列数，接下去 $n$ 行每行 $m$ 个数字，表示棋盘上每个格子的数字。

对于 $40\%$ 的数据，$1\leq n,m\leq 20$；

对于 $100\%$ 的数据，$1\leq n\times m\leq10^6,1\leq a_{ij}\leq1000$。

### 输出

输出最后的总分数。

### 样例输入

> 2 2
>
> 5 7
>
> 4 3

### 样例输出

> 9

### 解释

初始 $score=5$，A 往右移动棋子，$score=5+7=12$，之后 B 只能往下移动棋子，$score=12-3=9$;

初始 $score=5$，A 往下移动棋子，$score=5+4=9$，之后 B 只能往右移动棋子，$score=9-3=6$；

因此 A 选择往右移动棋子，这样最终的 $score$ 值才会最大。

## 行列交换 I (easy version)

在一个 $n\times m$ 的矩阵里，填入 $1$ 到 $n\times m$ 之间的数字，保证每个数字都只出现一次，你可以将任意两行进行交换，任意两列进行交换，允许交换无限次，问最终能否把数字从左上角到右下角有序排列？

有序排列大概是这样：

> 1 2 3 4
>
> 5 6 7 8
>
> 9 10 11 12

### 输入

第一行两个整数 $n,m$，分别表示矩阵的行数与列数，后面 $n$ 行每行 $m$ 个数字，为矩阵中的元素。

对于 $40\%$ 的数据，$1\leq n,m\leq100$；

对于 $100\%$ 的数据，$1\leq n\times m\leq10^6,~1\leq a_{ij}\leq n\times m$

### 输出

若可以，输出 `YES`，否则输出 `NO`（全为大写）。

### 样例输入 1

> 2 2
>
> 4 2
>
> 3 1

### 样例输出 1

> NO

### 样例输入 2

> 2 2
>
> 4 3
>
> 2 1

### 样例输出 2

> YES

## 行列交换 II (hard version)

在一个 $n\times m$ 的矩阵里，填入任意正整数，保证每个数字都只出现一次，其中某些整数被隐藏不可见，你可以将任意两行进行交换，任意两列进行交换，允许交换无限次，问最终能否把数字从左上角到右下角有序排列？

对于存在被隐藏的数字，在排列时可忽略这些被隐藏的数字，只需要保证在除去被隐藏数字的情况下：

1. 每一行内，左边的数字一定小于右边的数字；
2. 任意两行，排在后面的行的最小值大于排在前面的行的最大值。

### 输入

第一行两个整数 $n,m$，分别表示矩阵的行数与列数，后面 $n$ 行每行 $m$ 个数字，为矩阵中的数字，正整数表示数字没有被隐藏，0 表示被隐藏。对于 $100\%$ 的数据，$1\leq n\times m\leq 10^6,~0\leq a_{ij}\leq10^9$。

### 输出

若可以，输出 `YES`，否则输出 `NO`（全为大写）。

### 样例输入 1

> 2 2
>
> 1 0
>
> 2 0

### 样例输出 1

> YES

### 样例输入 2

> 2 3
>
> 4 3 0
>
> 1 0 2 

### 样例输出 2

> YES

## 抢红包

一个红包总共有 $m$ 份，总共有 $n$ 个人抢红包，到第 $i~(i\neq n)$ 个人时，若此时红包还剩下 $x$ 份，他可以等概率地抢到在 $[1,x-(n-i)]$ 区间内的红包份数，即最少 $1$ 份红包，最多也要给剩下的所有人每人留 $1$ 份，第 $n$ 个人将抢到剩下所有红包，问最后一个人抢到红包数量的期望值。

### 输入

输入包含两个整数 $n,m$，分别表示抢红包的人数与红包份数。

对于 $5\%$ 的数据，$1\leq n\leq2,2\leq m\leq100$；

对于 $20\%$ 的数据，$1\leq n\leq m\leq100$；

对于 $100\%$ 的数据，$1\leq n\leq m\leq5000$

### 输出

输出最后一个人抢到红包的期望值对 $10^9+7$ 取模后的结果。（什么叫对 $10^9+7$ 取模等这题被选上之后再详细补充）

### 样例输入

```
2 6
```

### 样例输出

```
2
```

## 走法

在一个 $n$ 个节点的有向图上，存在 $m$ 条有向边，求从节点 $1$ 走 $1$ 步、$2$ 步……$k$ 步之后，恰好到达节点 $n$ 的走法总共有多少种。

### 输入

第一行三个整数 $n,m,k$，分别表示节点数、边数与步数，接下去 $m$ 行每行两个整数 $u_i,v_i$，表示第 $i$ 条有向边从 $u_i$ 指向 $v_i$。

对于 $20\%$ 的数据，$1\leq n,m,k\leq10$；

对于 $100\%$ 的数据，$1\leq n\leq30,1\leq m\leq\frac{n(n-1)}{2},1\leq k\leq10^9$

### 输出

输出走法数对 $10^{10}+7$ 取模后的结果。

### 样例输入

> 2 2 4
>
> 1 2
>
> 2 1

### 样例输出

> 2

### 解释

两种走法分别是：1→2，1→2→1→2